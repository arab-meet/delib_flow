<root BTCPP_format="4">
  <BehaviorTree ID="MainTree">
    <Sequence>
      <Script code="head_action:='head_controller/follow_joint_trajectory'"/>

      <!-- Move head -->
      <GetTrajectoryFromYAML package_name="tiago_grab" config_file="tiago_positions.yaml"/>
      <FollowJointTrajectory action_name="{head_action}" trajectory="{traj.head_down}"/>

      <!-- Pick Object -->
      <SetTargetUsingArucoMarker name="GetArUcoTarget" target_frame="base_link" target_pose="{grab_goal}"/>
      <ReachObject action_name="pick_object" name="PickObject" target_pose="{grab_goal}"/>

    </Sequence>
  </BehaviorTree>
</root>
