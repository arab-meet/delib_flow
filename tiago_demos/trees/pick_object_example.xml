<root BTCPP_format="4">
  <BehaviorTree ID="MainTree">
    <Sequence>
      <Script code="
        arm_action:='arm_controller/follow_joint_trajectory';
        grip_action:='gripper_controller/follow_joint_trajectory';
        head_action:='head_controller/follow_joint_trajectory';
        torso_action:='torso_controller/follow_joint_trajectory';
        head_action:='head_controller/follow_joint_trajectory';
        torso_action:='torso_controller/follow_joint_trajectory'"/>

      <!-- TODO(Load Pre-defined Targets from a yaml file) -->
      <Script code="
        grab_goal:='0;base_link;0.5;0.2;0.4;0.0;0.707;0.0;0.707';
        base_target:='0;map;3.7;0.0;0.0;0.0;0.0;0.0;1.0'"/>

      <!-- Move head -->
      <!-- <GetTrajectoryFromYAML trajectory_name="head_sweep" package_name="tiago_grab" config_file="tiago_positions" trajectory="{trajectory_msg}"/> -->
      <!-- <FollowJointTrajectory action_name="{head_action}" trajectory="{trajectory_msg}"/> -->

      <!-- Move base -->
      <NavigateToPose name="MoveToObject" goal="{base_target}"/>

      <!-- Pick Object -->
      <ReachObject name="PickObject" target_pose="{grab_goal}"/>



    </Sequence>
  </BehaviorTree>
</root>
